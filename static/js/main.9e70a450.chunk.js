(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e,t,n){e.exports=n(272)},272:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(16),s=n(28),c=n(21),o=n(98),u="FETCH_ERROR",l="SET_SEARCH_STRING",m="GET_DATA",f="SET_DATA",g="SET_SEARCH_RESULTS";function h(e){return{type:g,searchResultItems:e}}var d=function(e,t){var n=/\/| |\(|\)|-/,a=e.trim().toLowerCase().split(n),r=function(e,t){return""===e||t.toLowerCase().split(n).includes(e)};return t.filter(function(e){return function(e,t){var n=e.every(function(e){return r(e,t.title)}),a=t.keywords.split(",").some(function(t){return e.every(function(e){return r(e,t)})});return n||a}(a,e)})};function v(){return function(e,t){var n=t().search,a=n.searchString,r=n.dataCache;if(""===a.trim())e(h([]));else{if(0===r.length)return e({type:m}),fetch("https://secure.toronto.ca/cc_sr_v1/data/swm_waste_wizard_APR?limit=1000").then(function(e){return e.json()}).then(function(t){e({type:f,data:t}),e(h(d(a,t)))}).catch(function(t){e({type:u}),console.log(t)});e(h(d(a,r)))}}}var p={dataCache:[],searchString:"",searchResultItems:[],isFetching:!1,isError:!1},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case l:return Object.assign({},e,{searchString:t.searchString});case m:return Object.assign({},e,{isFetching:!0,isError:!1});case f:return Object.assign({},e,{dataCache:t.data,isFetching:!1,isError:!1});case g:return Object.assign({},e,{searchResultItems:t.searchResultItems});case u:return Object.assign({},e,{dataCache:[],searchResultItems:[],isFetching:!1,isError:!0});default:return e}},b=n(105),y="ADD_TO_FAVOURITES",w="REMOVE_FROM_FAVOURITES";var I={favouritesItems:[]},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case y:return{favouritesItems:[].concat(Object(b.a)(e.favouritesItems),[t.item])};case w:return{favouritesItems:e.favouritesItems.filter(function(e){return e.title!==t.item.title})};default:return e}},x=Object(c.c)({search:E,favourites:S});var F,R=Object(c.d)(x,F,Object(c.a)(o.a)),O=n(104),j=n.n(O),T=n(18),_=n(15),C=n.n(_),N=n(22),k=n.n(N),A=Object(T.withStyles)(function(e){return{grid:{background:"linear-gradient(to right, #1d5895 , #22965e)",paddingTop:5*e.spacing.unit,paddingBottom:5*e.spacing.unit,marginTop:e.spacing.unit,marginBottom:e.spacing.unit},font:{color:"white",fontWeight:"bold"}}})(function(e){var t=e.classes,n=e.title;return r.a.createElement(C.a,{container:!0,direction:"column",justify:"center",className:t.grid},r.a.createElement(C.a,{item:!0},r.a.createElement(k.a,{variant:"h3",align:"center",className:t.font},n)))}),L=n(101),W=n.n(L),D=n(102),H=n.n(D),B=n(103),U=n.n(B),V=n(99),G=n.n(V),J=n(100),M=n.n(J),P=n(57),z=n.n(P),q=Object(T.withStyles)(function(e){return{icon:{padding:0,marginTop:"12px",marginRight:"6px"},title:{marginTop:"16px"},fav:{color:"#23995c"},notFav:{color:"#aaaaaa"},sameRow:{display:"flex",alignItems:"flex-start"}}})(function(e){var t=e.classes,n=e.isFav,a=e.item,i=e.addToFavourites,s=e.removeFromFavourites;return r.a.createElement(C.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start"},r.a.createElement(C.a,{item:!0,xs:5,className:t.sameRow},r.a.createElement(G.a,{onClick:function(e){return n?s(a):i(a)},className:t.icon},r.a.createElement(M.a,{className:n?t.fav:t.notFav})),r.a.createElement("div",{className:t.title},a.title)),r.a.createElement(C.a,{item:!0,xs:7},z()(z()(a.body))))}),K=Object(s.b)(function(e,t){return{isFav:t.isFav||void 0!==e.favourites.favouritesItems.find(function(e){return e.title===t.item.title})}},function(e){return{addToFavourites:function(t){return e(function(e){return{type:y,item:e}}(t))},removeFromFavourites:function(t){return e(function(e){return{type:w,item:e}}(t))}}})(q),Q=Object(T.withStyles)(function(e){return{container:{backgroundColor:"#f7fefa",paddingTop:2*e.spacing.unit},font:{color:"#23995c",fontWeight:"900"}}})(function(e){var t=e.classes,n=e.favouritesItems;return r.a.createElement(C.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",className:t.container},r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(k.a,{variant:"h5",className:t.font,gutterBottom:!0},"Favourites")),r.a.createElement(C.a,{item:!0,xs:12},n.map(function(e){return r.a.createElement(K,{isFav:!0,item:e,key:e.title})})))}),X=Object(T.withStyles)(function(e){return{grid:{padding:2*e.spacing.unit},button:{backgroundColor:"#23995c",padding:0,maxWidth:"55px",maxHeight:"55px",minWidth:"55px",minHeight:"55px","&:hover":{backgroundColor:"#23995c"},marginLeft:2*e.spacing.unit},icon:{color:"white",transform:"scale(-1, 1)",height:"50px",width:"50px"},form:{display:"flex"}}})(function(e){var t=e.classes,n=e.searchString,a=e.searchResultItems,i=e.isFetching,s=e.isError,c=e.setSearchString,o=e.getResults,u=e.favouritesItems;return r.a.createElement(C.a,{container:!0,direction:"row",justify:"center",alignItems:"center",className:t.grid},r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement("form",{onSubmit:function(e){o(),e.preventDefault()},className:t.form},r.a.createElement(W.a,{fullWidth:!0,value:n,onChange:function(e){return c(e.target.value)},variant:"outlined"}),r.a.createElement(H.a,{type:"submit",className:t.button},r.a.createElement(U.a,{className:t.icon})))),r.a.createElement(C.a,{item:!0,xs:12},i||s?s?r.a.createElement(k.a,{variant:"h5"},"Unfortunately, there was an error. Please retry again in a few seconds! :("):r.a.createElement(k.a,{variant:"h5"},"Loading..."):a.map(function(e){return r.a.createElement(K,{item:e,key:e.title})})),u.length>0&&r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(Q,{favouritesItems:u})))}),Y=Object(s.b)(function(e){return{searchString:e.search.searchString,searchResultItems:e.search.searchResultItems,isFetching:e.search.isFetching,isError:e.search.isError,favouritesItems:e.favourites.favouritesItems}},function(e){return{setSearchString:function(t){e({type:l,searchString:t}),""===t&&e(h([]))},getResults:function(){return e(v())}}})(X),Z=function(){return r.a.createElement(a.Fragment,null,r.a.createElement(j.a,null),r.a.createElement(A,{title:"Toronto Waste Lookup"}),r.a.createElement(Y,null))};Object(i.render)(r.a.createElement(s.a,{store:R},r.a.createElement(Z,null)),document.getElementById("root"))}},[[106,2,1]]]);
//# sourceMappingURL=main.9e70a450.chunk.js.map